
//emp.h file

#define ARRAY_ALLOC_FAIL NULL
#define INT_ALLOC_FAIL NULL
#define ARRAY_DEALLOC -1
#define ARRAY_FULL 9
#define INSERT_SUCCESS 1
#define FOUND 1
#define NOT_FOUND 0
#define NOT_UNIQUE 7
#define BKUP_ALLOC_FAIL NULL
#define UPTO_DATE 1
#define BKUP_REQUIRED 0
#define SUCCESS 1
#define ABORT -1
#define NAME_SIZE 15
#define DESIG_SIZE 20

struct _employee_
{
    int emp_id;
    char emp_name[NAME_SIZE];
    float emp_sal;
    char emp_desig[DESIG_SIZE];
    int age;
};
typedef struct _employee_ Employee;
struct _array_
{
    Employee *arr;
    int *bkup;
    int c_size, t_size;
    int bkup_status;
};
typedef struct _array_ Array;

Array * initialise_array(int);
int insert_data(Array *, Employee data);
int search(Array *, int empid);
void display(Array *);
void sort_by_age(Array *);

//Practice problems
float get_average_hr_salary(Array *);
Employee get_employee_details(Array *, char *emp_name);
int terminate_employee(Array *, int emp_id);
int count_employees_by_location(Array *, char *location);
Array * deallocate(Array *);




//emp.op.c file

#include<stdlib.h>
#include<stdio.h>
#include <assert.h>
#include "employee.h"

Array * initialise_array(int size)
{
    Array *my_arr;
    my_arr =(Array *)malloc(sizeof(Array));
    if(NULL == my_arr) return ARRAY_ALLOC_FAIL;

    my_arr->c_size = 0;
    my_arr->t_size = size;
    my_arr->arr = (Employee *)malloc(sizeof(Employee) * size);
    my_arr->bkup_status = UPTO_DATE;

    if(NULL == my_arr->arr){
        free(my_arr);
        return INT_ALLOC_FAIL;
    }

    return my_arr;
}

int insert_data(Array *my_arr, Employee data)
{
    if(my_arr == NULL) return ARRAY_DEALLOC;

    if(my_arr->c_size == my_arr->t_size) return ARRAY_FULL;

    *(my_arr->arr + my_arr->c_size) = data;
    my_arr->c_size++;

    return INSERT_SUCCESS;
}
int search(Array *my_arr, int id)
{
    int i;

    for(i=0; i <my_arr->c_size; i++)
        if((my_arr->arr+i)->emp_id == id) return FOUND;
    return NOT_FOUND;
}

void sort_by_age(Array *my_arr)
{
    int i, j;
    Employee temp;
    int flag;
    for(i=0;i<my_arr->c_size; i++){
        flag = 0;
        for(j=0; j<my_arr->c_size-1-i; j++){
            if((my_arr->arr+j)->age > (my_arr->arr+j+1)->age){
                flag = 1;
                temp = my_arr->arr[j];
                my_arr->arr[j] = my_arr->arr[j+1];
                my_arr->arr[j+1] = temp;
            }
        }
        if(flag == 0) return;
    }
}

void display(Array *my_arr)
{
    int i;
    printf("\n");
    for(i=0; i<my_arr->c_size; i++)
        printf("\n%d %s %d %f %s",//
               (my_arr->arr+i)->emp_id,//
               (my_arr->arr+i)->emp_name, //
               (my_arr->arr+i)->age, //
               (my_arr->arr+i)->emp_sal, //
               (my_arr->arr+i)->emp_desig);
}

Array * deallocate(Array *my_arr)
{
    if(my_arr == NULL) return NULL;

    free(my_arr->arr);
    free(my_arr);

    return NULL;
}

//main.c file

#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include<string.h>
#include "employee.h"

int main()
{
    Array *test;
    Employee emp;

    test = initialise_array(5);
    assert(test->c_size == 0);
    assert(test->t_size == 5);

    emp.emp_id = 1001;
    strcpy(emp.emp_name,"Raj");
    strcpy(emp.emp_desig,"HR");
    emp.age = 31;
    emp.emp_sal = 100000;
    assert(insert_data(test, emp));
    assert(test->c_size == 1);
    assert(test->arr->emp_id == 1001);

    emp.emp_id = 1002;
    strcpy(emp.emp_name,"Rajan");
    strcpy(emp.emp_desig,"HR Executive");
    emp.age = 24;
    emp.emp_sal = 120000;
    assert(insert_data(test, emp));

    emp.emp_id = 1003;
    strcpy(emp.emp_name,"Rajani");
    strcpy(emp.emp_desig,"HR");
    emp.age = 35;
    emp.emp_sal = 200000;
    assert(insert_data(test, emp));

    emp.emp_id = 1004;
    strcpy(emp.emp_name,"Rajesh");
    strcpy(emp.emp_desig,"SE");
    emp.age = 24;
    emp.emp_sal = 80000;
    assert(insert_data(test, emp));

    emp.emp_id = 1005;
    strcpy(emp.emp_name,"Rajiv");
    strcpy(emp.emp_desig,"HR");
    emp.age = 49;
    emp.emp_sal = 300000;
    assert(insert_data(test, emp));
    assert((test->arr+4)->emp_id == 1005);
    assert(test->c_size == 5);

    emp.emp_id = 1006;
    strcpy(emp.emp_name,"Rajiv");
    strcpy(emp.emp_desig,"Sr. Manager");
    emp.age = 49;
    emp.emp_sal = 300000;
    assert(insert_data(test, emp) == ARRAY_FULL);

    assert(search(test, 1001) == FOUND);
    assert(search(test, 1005) == FOUND);
    assert(search(test, 1006) == NOT_FOUND);
    sort_by_age(test);
    display(test);

    test = deallocate(test);
    assert(test == NULL);
    return 0;
}


//for linkedlist easy n simple code

//list.h file
#define NAME_SIZE 15
#define DESIG_SIZE 20
#define LOCATION_SIZE 20
#define ACTIVE 1
#define NOT_ON_ROLL -1
#define INSERT_FAIL -1
#define SUCCESS 1
#define PROMOTED 1
#define EMP_NOT_FOUND 0

struct _employee_
{
    int emp_id;
    char emp_name[NAME_SIZE];
    float emp_sal;
    char emp_desig[DESIG_SIZE];
    char emp_location[LOCATION_SIZE];
    int emp_status;
};
typedef struct _employee_ Emp;

struct _employee_node_
{
    Emp data;
    struct _employee_node_ *ptr;
};

typedef struct _employee_node_ Enode;

struct _emp_linked_list_
{
    Enode *head, *tail;
    int count;
};
typedef struct _emp_linked_list_ Emplist;

Emplist * initialise_emp_list();
int insert_employee(Emplist *,Emp emp_id);
// return SUCCESS if promoted, id not present
int give_promotion(Emplist *, int emp_id, char *desig);
int give_bonus(Emplist *, float);
int emp_count_on_location(Emplist *,char *location);
int fire_employee(Emplist *, int emp_id);
void emp_display(Emplist *);


//list_op.c file
#include<stdlib.h>
#include<stdio.h>
#include <string.h>
#include "employee.h"
#define IS_NULL(PTR) PTR == NULL
#define ALLOC_FAIL NULL

Emplist * initialise_emp_list()
{
    Emplist *emp;

    emp = (Emplist *)malloc(sizeof(Emplist));
    if(IS_NULL(emp)) return ALLOC_FAIL;

    emp->head =emp->tail = NULL;
    emp->count = 0;

    return emp;
}

Enode * get_node_employee(Emp data)
{
    Enode *new_node;

    new_node = (Enode *)malloc(sizeof(Enode));
    if(new_node == NULL) return ALLOC_FAIL;

    new_node->data = data;
    new_node->ptr = NULL;
    return new_node;
}
int insert_employee(Emplist *my_list, Emp emp_data)
{
    Enode *new_node = get_node_employee(emp_data);

    if(new_node == NULL) return INSERT_FAIL;

    if(my_list->head == NULL)
        my_list->head = my_list->tail = new_node;
    else{
        new_node->ptr = my_list->head;
        my_list->head = new_node;
    }
    my_list->count++;
    return SUCCESS;
}
// return SUCCESS if promoted, id not present
int give_promotion(Emplist *emp, int emp_id, char *desig)
{
    Enode *temp;

    for(temp = emp->head; temp != NULL; temp = temp->ptr)
    {
        if((temp->data).emp_id == emp_id)
        {
            strcpy((temp->data).emp_desig, desig);
            return PROMOTED;
        }
    }
    return EMP_NOT_FOUND;
}
int give_bonus(Emplist *, float);
int emp_count_on_location(Emplist *emp,char *location)
{
    Enode *temp;
    int count = 0;
    for(temp = emp->head; temp != NULL; temp = temp->ptr)
    {
        if(!strcmp((temp->data).emp_location,location))
            count++;
    }
    return count;
}
int fire_employee(Emplist *, int emp_id);

void emp_display(Emplist *emp)
{
    Enode *temp;

    for(temp = emp->head; temp != NULL; temp = temp->ptr)
    {
        printf("\nEmployee id: %d\n Employee Name: %s\n Employee Designation %s\n\n", //
               (temp->data).emp_id,//
               (temp->data).emp_name,
               (temp->data).emp_desig);
    }
}

//main.c file
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include<assert.h>
#include "employee.h"

int main()
{
    Emplist *test_emp;
    Emp emp_data;

    test_emp = initialise_emp_list();
    assert(test_emp->head == NULL);
    assert(test_emp->tail == NULL);
    assert(test_emp->count == 0);

    emp_data.emp_id = 1001;
    strcpy(emp_data.emp_name, "Raj");
    strcpy(emp_data.emp_desig,"Developer");
    strcpy(emp_data.emp_location, "Blore");
    emp_data.emp_sal = 100000;
    emp_data.emp_status = ACTIVE;

    assert(insert_employee(test_emp, emp_data));

    emp_data.emp_id = 1002;
    strcpy(emp_data.emp_name, "Rajiv");
    strcpy(emp_data.emp_desig,"Developer");
    strcpy(emp_data.emp_location, "Blore");
    emp_data.emp_sal = 10000;
    emp_data.emp_status = ACTIVE;

    assert(insert_employee(test_emp, emp_data));

    emp_data.emp_id = 1003;
    strcpy(emp_data.emp_name, "Rajani");
    strcpy(emp_data.emp_desig,"Manager");
    strcpy(emp_data.emp_location, "Chennai");
    emp_data.emp_sal = 400000;
    emp_data.emp_status = ACTIVE;

    assert(insert_employee(test_emp, emp_data));

    emp_data.emp_id = 1004;
    strcpy(emp_data.emp_name, "Rajat");
    strcpy(emp_data.emp_desig,"Developer");
    strcpy(emp_data.emp_location, "Chennai");
    emp_data.emp_sal = 100000;
    emp_data.emp_status = ACTIVE;

    assert(insert_employee(test_emp, emp_data));

    emp_data.emp_id = 1005;
    strcpy(emp_data.emp_name, "Raja");
    strcpy(emp_data.emp_desig,"Manager");
    strcpy(emp_data.emp_location, "Blore");
    emp_data.emp_sal = 300000;
    emp_data.emp_status = ACTIVE;

    assert(insert_employee(test_emp, emp_data));

    assert(test_emp->count == 5);
    assert((test_emp->head->data).emp_id == 1005);

    assert(give_promotion(test_emp,1004, "Sr. Developer"));
    assert(!strcmp((test_emp->head->ptr->data).emp_desig, "Sr. Developer"));
    emp_display(test_emp);

    assert(emp_count_on_location(test_emp,"Blore") == 3);
    return 0;
}

//use this n customise the below question for exam student it should be like write-up code
